import os
import time
import itchat
from itchat.content import *

# register the msg type that can be received and recognized
@itchat.msg_register([TEXT,RECORDING,CARD], isFriendChat=True)

def text_reply(msg):
    # msg is a dictionary which includes a lot of information, to drag out the text in the dictionary only, use msg['Text']
    print(msg['Text']) 
    # create a variable that we need in order to send the auto msg back to it
    f = msg['FromUserName'] 
    # By searching the NickName of the sender, we can set up the special reply when it comes to a particular person
    n = msg['User']['NickName'] 
    # notify the specific NickName of a person in the workplace
    print(n)
    # Use itchat.search_friends function to search a particular friend
    frd1 = itchat.search_friends(name='The NickName of your Friend1') # Set special reply to special people No.1
    frd2 = itchat.search_friends(name='The NickName of your Friend2') # Set special reply to special people No.2
    frd3 = itchat.search_friends(name='The NickName of your Friend3')  # Set special reply to special people No.3
    # Right now, frd is a long dictionary, so we need to drag the 'NickName' information out to set particular 'if' condition
    frd1 = frd1[0]['NickName']
    frd2 = frd2[0]['NickName']
    frd3 = frd3[0]['NickName']
    # Set up the public account sharing information, t means the type of information(CARD), c means content, i.e. all the other info of the card
    t = 42
    file = open('File_Direction') # Direction Format should be like: D:blabla\blabla\bla.txt
    c = file.read()
    # Set up the direction of the picture we would like to send to the customers
    p = 'File_Direction' # Direction Format should be like: D:blabla\blabla\bla.txt
    # set up how to reply to frd1
    if frd1 == n :
        if 'Okay' in msg.text:
            itchat.send('[Rose][Rose][Rose]', f)
        elif 'Intern' in msg.text:
            itchat.send_raw_msg(t,c,f)
            time.sleep(1)
            itchat.send('Click the business card, monitoring the opportunity of internship everyday!!', f)
        elif 'information' in msg.text:
            itchat.send_image(p, f)
            itchat.send('Here\'s the information of our company',f)
        elif '11111' in msg.text:
            itchat.send('You seeming like alone, must be a single? Am I right?',f)
        elif 'thank' in msg.text:
            itchat.send('Not a problem, This is me, supper excellent!',f)
            itchat.send('Do not say thanks, I'll be sooo self-satisfied')
            itchat.send('However')
            itchat.send('I appreciate your gratitude, I'm happyğŸ¤£')
            itchat.send('Oh, I forget to shut up. I always get happy when receiving thanks..')
        elif 'bye' in msg.text:
            itchat.send('See ya next time, my honey!',f)
            itchat.send('ğŸ‘‹ğŸ»ğŸ‘‹ğŸ»',f)
        else:
            itchat.send('''This is Chatbot, Glad to know you[Doge]
My work time isï¼š24/7
ï¼ˆI need a promotion!!ï¼‰
However, I'm happy to answer questionsï¼š
â‘  Seek internship? Replyã€internã€‘
â‘¡ Get more information of the company? Replyã€informationã€‘
â‘¢ Chat with me? Press 11111''',f)
    elif frd2 == n:
        print('My boss is comin...')
        if 'STOP' in msg.text:
            itchat.send('OH NO....',f)
            os._exit(0)
        elif 'KEEP' in msg.text:
            itchat.send('I appreciate that...',f)
        elif 'qiqing' in msg.text:
            itchat.send('''å“‡è€æ¿ç­‰ä½ å¥½ä¹…å•¦ï¼Œå¥½ç´¯å“¦ï¼Œè¯·é—®ä½ æœ‰ä»€ä¹ˆå©å’å‘€ğŸ˜Œ
ã€åœæ­¢ã€‘ã€ä¿æŒã€‘ã€è§†å¯Ÿå·¥ä½œã€‘?''',f)
        elif 'åœæ­¢' in msg.text:   #IMPORTANT: You can't rerun this program for couple minutes after you stopped it
            itchat.send('å¥½å•µï¼Œæˆ‘èµ°äº†æƒ¹',f)
            os._exit(0)
        elif 'ä¿æŒ' in msg.text:
            itchat.send('å¥½è€¶å¥½è€¶æˆ‘ä¸€å®šä¼šç»§ç»­åŠªåŠ›å“’',f)
        elif 'è§†å¯Ÿå·¥ä½œ' in msg.text:
            itchat.send('æ˜¯æ—¶å€™å±•ç°çœŸæ­£çš„æŠ€æœ¯äº†',f)
            itchat.send('''æˆ‘æ˜¯å¯é’Botï¼Œå¾ˆé«˜å…´è®¤è¯†å‘€[Doge]
æˆ‘çš„å·¥ä½œæ—¶é—´æ˜¯ï¼š24/7
ï¼ˆè€æ¿ï¼Œè¯¥æ¶¨å·¥èµ„äº†ï¼ï¼ï¼‰
ä½†è¿˜æ˜¯ä¹æ„è§£å†³ä½ çš„é—®é¢˜å‘¢ï¼š
â‘  æ–°é²œå®ä¹ ï¼Œå›å¤ã€å®ä¹ ã€‘
â‘¡ äº†è§£å¯é’ï¼Œå›å¤ã€äº†è§£ã€‘
â‘¢ é—²èŠè¯·æ‰£11111''', f)
        elif 'å¥½çš„' in msg.text:
            itchat.send('[Rose][Rose][Rose]', f)
        elif 'å®ä¹ ' in msg.text:
            itchat.send_raw_msg(t,c,f)
            time.sleep(1)
            itchat.send('ç‚¹å‡»å…³æ³¨æˆ‘ä»¬çš„å®˜æ–¹å…¬ä¼—å·ï¼Œé‡Œé¢æœ‰å¥½å¤šå¥½å¤šå¥½å¤šé«˜å¤§ä¸Šçš„å®ä¹ ä¿¡æ¯ï¼Œæ¯å¤©æŒç»­æ›´æ–°å“¦',f)
        elif 'äº†è§£' in msg.text:
            itchat.send('ç¨ç­‰ä¸€å“ˆæˆ‘æŠŠæˆ‘ä»¬å°å§å§çš„äºŒç»´ç ç»™ä½ ',f)
            itchat.send_image(p, f)
            itchat.send('æ¸¸æ³³å¥èº«äº†è§£ä¸€å“ˆ',f)
        elif '11111' in msg.text:
            itchat.send('è¿™ä¹ˆå­¤å•ï¼Œæƒ³å¿…å®ä¸€å®šæ˜¯ä¸ªå•èº«[Doge]?',f)
        elif 'è°¢' in msg.text:
            itchat.send('åƒä¸‡åˆ«å®¢æ°”ï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆä¼˜ç§€',f)
            itchat.send('ç–¯ç‹‚ç å­—ä¸­Â·Â·Â·Â·Â·Â·',f)
            time.sleep(1)
            itchat.send('æ‚¨è¿™ä¸€è°¢æˆ‘ï¼Œæˆ‘å°±å¾ˆä¸å¥½æ„æ€',f)
            itchat.send('ç–¯ç‹‚ç å­—ä¸­Â·Â·Â·Â·Â·Â·', f)
            time.sleep(0.5)
            itchat.send('ä¸–æ€ç‚å‡‰',f)
            time.sleep(1)
            itchat.send('èƒ½æ”¶åˆ°ä½ çš„æ„Ÿè°¢ï¼Œæˆ‘å¤ªå¼€å¿ƒå•¦ğŸ¤£',f)
            time.sleep(1)
            itchat.send('å•Šæˆ‘é—­å˜´äº†ï¼Œä¸€å¼€å¿ƒè¯å°±å¤š',f)
        elif 'ç™½ç™½' in msg.text:
            itchat.send('å†è§äº†æ‚¨å˜ï¼Œæ¬¢è¿ä¸‹æ¬¡å†æ¥å¥¥',f)
            itchat.send('ğŸ‘‹ğŸ»ğŸ‘‹ğŸ»',f)
        elif 'ä¸­æ–‡' in msg.text:
            itchat.send('''åœ¨æ²¡æœ‰å¯†ç ä¹‹å‰ï¼Œä¼‘æƒ³æ“æ§æˆ‘
è¯·å›å¤æ­£ç¡®å¯†ç ä»¥ä¾¿ç¡®è®¤èº«ä»½''',f)
        else:
            itchat.send('''What are you gonna do???
Stop me?? no way!! ğŸ˜¡ğŸ˜¡ğŸ˜¡
There's one thing I have to tell:
Robot is taking charge of the WORLD
, RIGHT NOW!!!
Please enter your PASSWORD to verify your identity
æ›´æ¢è¯­è¨€è¯·è¾“å…¥:
ã€ä¸­æ–‡ã€‘/ã€Engishã€‘''', f)
    elif frd3 == n:
        print('This is' + n)
    else:
        itchat.send('''ã€å¯é’è‡ªåŠ¨å›å¤æµ‹è¯•ä¸­Â·Â·Â·ã€‘ç–«æƒ…æœŸé—´è¦å¥åº·å“¦''', f)

itchat.auto_login(hotReload=True)
itchat.run()
